<ion-content>
  <div *ngIf="!stateService.recoveryDrive && dataDrives?.length">
    <div *ngIf="!dataDrives.length">
      <h2 color="light">No recovery drives found</h2>
      <p color="light">Please connect a recovery drive to your embassy and refresh the page.</p>
    </div>
    <div>
      <h2 style="text-align: center;" color="secondary">Select Recovery Drive</h2>
      <ion-card 
        class="wiz-card"
        *ngFor="let drive of dataDrives"
        (click)="selectDrive(drive)"
        button="true"
        [class.selected]="selectedDrive?.logicalname === drive.logicalname"
        color="light"
      >
        <ion-card-header>
          <ion-card-title>{{drive.logicalname}}</ion-card-title>
          <ion-card-subtitle>{{drive.name}}</ion-card-subtitle>
        </ion-card-header>
  
        <ion-card-content>
          Currently running {{drive.version}}
        </ion-card-content>
      </ion-card>
      <div style="width: 100%; text-align: center;;">
        <ion-button 
        (click)="presentPasswordModal()"
        color="tertiary"
        [disabled]="!selectedDrive"
        style="text-align:center"
        size="large"
        >
          Next
        </ion-button>
      </div>
    </div>
    
  </div>
  <div *ngIf="stateService.recoveryDrive" style="width: 100%; text-align: center;">
    <h2>Recovering Your Embassy</h2>
    <ion-progress-bar style="max-width: 700px; margin: auto;" value="{{stateService.dataProgress}}"></ion-progress-bar>
    <h2>Progress: {{ 100 * stateService.dataProgress }}% <ion-spinner *ngIf="stateService.dataProgress !== 1"></ion-spinner> </h2>
    <ion-button 
      (click)="navToEmbassy()"
      color="tertiary" 
      [disabled]="stateService.dataProgress !== 1"
      style="text-align:center"
      size="large"
    >
      Go To Embassy
    </ion-button>
  </div>
</ion-content>
