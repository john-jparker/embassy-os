<ion-header>
  <ion-toolbar>
    <ion-title>
      Setup Wizard
    </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
  <div *ngIf="!stateService.recoveryDrive && dataDrives?.length">
    <div *ngIf="!dataDrives.length">
      <h2 color="light">No recovery drives found</h2>
      <p color="light">Please connect a recovery drive to your embassy and refresh the page.</p>
    </div>
    <div>
      <h2 color="light">Select Recovery Drive</h2>
      <ion-card 
        *ngFor="let drive of dataDrives"
        (click)="selectDrive(drive)"
        button="true"
        [class.selected]="selectedDrive?.logicalname === drive.logicalname"
        color="light"
      >
        <ion-card-header>
          <ion-card-title>{{drive.logicalname}}</ion-card-title>
          <ion-card-subtitle>{{drive.name}}</ion-card-subtitle>
        </ion-card-header>
  
        <ion-card-content>
          Currently running {{drive.version}}
        </ion-card-content>
      </ion-card>
      <ion-button (click)="chooseDrive()" color="primary" [disabled]="!selectedDrive">Next</ion-button>
    </div>
    
  </div>
  <div *ngIf="stateService.recoveryDrive">
    <h2>Progress: {{ 100 * stateService.dataProgress }}% <ion-spinner *ngIf="stateService.dataProgress !== 1"></ion-spinner> </h2>
    <ion-progress-bar value="{{stateService.dataProgress}}"></ion-progress-bar>
    <ion-button 
      (click)="navToEmbassy()"
      color="primary" 
      [disabled]="stateService.dataProgress !== 1"
    >
      Go To Embassy
    </ion-button>
  </div>
</ion-content>
